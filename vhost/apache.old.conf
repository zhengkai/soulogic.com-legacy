<VirtualHost *:85>
ServerName soulogic.com
ServerAlias soulogic.blog
DocumentRoot /www/soulogic/www

RPAFenable On
RPAFsethostname On
RPAFproxy_ips 74.207.253.134

AddDefaultCharset utf-8

# 所有 php 在运行前自动加载的脚本
php_admin_value auto_prepend_file "/www/soulogic/inc/init.php"
php_admin_value output_buffering "Off"

Alias /favicon.ico "/www/soulogic/res/favicon.ico"

Alias /blog/rss "/www/soulogic/www/rss.php"

Alias /platinum/doc/apachemodule/   "/var/www/soulogic.com/doc/apachemodule/"
Alias /code/doc/RegularExpressions/ "/var/www/soulogic.com/doc/RegularExpressions/"

Alias /yueyue/ /var/www/soulogic.com/yueyue.php/
Alias /yueyue  /var/www/soulogic.com/yueyue2.php

Alias /adhd           /var/www/soulogic.com/adhd
Alias /avatar         /var/www/soulogic.com/avatar
Alias /background     /var/www/soulogic.com/background
Alias /doc            /var/www/soulogic.com/doc
Alias /guestbook      /var/www/soulogic.com/guestbook
Alias /guild          /var/www/soulogic.com/guild
Alias /ip             /var/www/soulogic.com/ip
Alias /subset_test    /var/www/soulogic.com/subset_test
Alias /temp           /var/www/soulogic.com/temp

ErrorDocument 404 /404.php
ErrorDocument 403 /404.php

RewriteEngine On
RewriteRule ^/blog/archives/([1-9][0-9]+)\.html$  /archive.php?archive_id=$1
RewriteRule ^/blog/files/([1-9][0-9]+)\.jpg$      /file.php?file_id=$1

RewriteRule ^/archives/([1-9][0-9]+).*$           /archive.php?archive_id=$1
RewriteRule ^/upload/([1-9][0-9]+).*$             /file.php?file_id=$1

RewriteRule ^/tweets/([0-9]+).*$             /tweets.php?page=$1

# 只允许指定的目录显示，其他禁止访问
<Directory />
	AllowOverride None
	Order Deny,Allow
	Deny from all
</Directory>

<Directory /www/soulogic/www/>
	AllowOverride None
	Order allow,deny
	Allow from all
</Directory>

<Directory /www/soulogic/res/>
	AllowOverride None
	Order allow,deny
	Allow from all
</Directory>

<Directory /var/www/soulogic.com/>
	AllowOverride None
	Order allow,deny
	Allow from all
</Directory>

ErrorLog  "|/usr/bin/cronolog /apache-log/soulogic/%y%m/error_%d_log"
CustomLog "|/usr/bin/cronolog /apache-log/soulogic/%y%m/access_%d_log" combined
</VirtualHost>

<VirtualHost *:85>
ServerName soulogic.9farm.com
ServerAlias soulogic.res
DocumentRoot /www/soulogic/res

RPAFenable On
RPAFsethostname On
RPAFproxy_ips 74.207.253.134

ExpiresActive On

ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/x-png "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"

ExpiresByType text/css "access plus 1 month"
ExpiresByType application/javascript "access plus 1 month"

# 只允许指定的目录显示，其他禁止访问
<Directory />
	AllowOverride None
	Order Deny,Allow
	Deny from all
</Directory>

<Directory /www/soulogic/res/>
	AllowOverride None
	Order allow,deny
	Allow from all
</Directory>

AddCharset utf-8 .js .css

Alias /combo/ /www/soulogic/res/combine.php/
<Location /combo/>
	Order allow,deny
	Allow from all
</Location>

ErrorLog  "|/usr/bin/cronolog /apache-log/soulogic.res/%y%m/error_%d_log"
CustomLog "|/usr/bin/cronolog /apache-log/soulogic.res/%y%m/access_%d_log" combined
</VirtualHost>
